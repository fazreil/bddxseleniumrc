const assert = require('assert')
const { When, Then, Given } = require('@cucumber/cucumber')

// Generated by Selenium IDE
const { Builder, By, Key, until } = require('selenium-webdriver')

let driver
let vars = {}

When('open the website',async function() {
  driver = await new Builder().forBrowser('firefox').build()
  await driver.get("https://onlinebanking.rhbgroup.com/my/login")
  await driver.findElement(By.css(".e1d8l7bt0 > .rhb-logo > svg")).click()
});

Then('I should find the landing page',async function () {
  assert(await driver.findElement(By.css(".css-1gbaytc-StyledBox-StyledFlex > svg")).getText() == "")
  await driver.quit()
});

Given('I logged in as admin',async function () {
  driver = await new Builder().forBrowser('firefox').build()
  await driver.get("http://127.0.0.1:8080")
  await driver.findElement(By.name("username")).sendKeys("admin")
  await driver.findElement(By.name("password")).sendKeys("password")
  await driver.findElement(By.name("Login")).click()
});


When('I clicked about button',async function () {
  await driver.findElement(By.linkText("About")).click()
});

Then('I should find the dvwa landing page',async function () {
  const elements = await driver.findElements(By.css("#header > img"))
  assert(elements.length)
  await driver.quit()
});
